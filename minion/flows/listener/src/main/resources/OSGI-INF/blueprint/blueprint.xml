<blueprint
    xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">
    <bean id="telemetryRegistry" class="org.opennms.netmgt.telemetry.listeners.factory.TelemetryRegistryImpl" />
    <bean id="listenerDefinition" class="org.opennms.netmgt.telemetry.listeners.factory.ListenerDefinitionImpl" />

    <!-- TCP Listener Factory -->
    <bean id="tcpListenerFactory" class="org.opennms.netmgt.telemetry.listeners.factory.TcpListenerFactory">
        <argument ref="telemetryRegistry" />
    </bean>
    <service ref="tcpListenerFactory" interface="org.opennms.netmgt.telemetry.listeners.factory.ListenerFactory">
        <service-properties>
            <entry key="registration.export" value="true" />
        </service-properties>
    </service>

    <!-- UDP Listener Factory -->
    <bean id="udpListenerFactory" class="org.opennms.netmgt.telemetry.listeners.factory.UdpListenerFactory">
        <argument ref="telemetryRegistry" />
    </bean>
    <service ref="udpListenerFactory" interface="org.opennms.netmgt.telemetry.listeners.factory.ListenerFactory">
        <service-properties>
            <entry key="registration.export" value="true" />
        </service-properties>
    </service>

    <bean id="configManager" class="org.opennms.netmgt.telemetry.listeners.ConfigManager">
        <argument ref="udpListenerFactory" />
        <argument ref="listenerDefinition" />
    </bean>
</blueprint>
