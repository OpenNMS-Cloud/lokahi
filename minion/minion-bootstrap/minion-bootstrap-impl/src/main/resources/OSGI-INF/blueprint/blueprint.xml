<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.3.0"
    xsi:schemaLocation="
        http://www.osgi.org/xmlns/blueprint/v1.0.0
        https://osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
        http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.3.0
        http://aries.apache.org/schemas/blueprint-cm/blueprint-cm-1.3.0.xsd
    ">

    <cm:property-placeholder id="minionBootstrapProperties" persistent-id="org.opennms.minion.bootstrap" update-strategy="reload">
        <cm:default-properties>
            <cm:property name="certificate-package.overwrite-existing" value="true"/>
            <cm:property name="certificate-package.password" value=""/>
            <cm:property name="certificate-package.zip-path" value="certs/minion-cert.zip"/>
            <cm:property name="certificate-package.client-key-output-path" value="certs/client.key"/>
            <cm:property name="certificate-package.client-cert-output-path" value="certs/client.signed.cert"/>
            <cm:property name="certificate-package.ca-cert-output-path" value="certs/CA.cert"/>
        </cm:default-properties>
    </cm:property-placeholder>

    <bean id="certificatePackageBootstrapImpl" class="org.opennms.horizon.minion.bootstrap.impl.CertificatePackageBootstrapImpl" init-method="init">
        <property name="overwriteExisting" value="${certificate-package.overwrite-existing}"/>
        <property name="password" value="${certificate-package.password}"/>
        <property name="zipPath" value="${certificate-package.zip-path}"/>

        <property name="clientKeyOutputPath" value="${certificate-package.client-key-output-path}"/>
        <property name="clientCertOutputPath" value="${certificate-package.client-cert-output-path}"/>
        <property name="caCertOutputPath" value="${certificate-package.ca-cert-output-path}"/>
    </bean>

    <service ref="certificatePackageBootstrapImpl" interface="org.opennms.horizon.minion.bootstrap.CertificatePackageBootstrap" />

</blueprint>
